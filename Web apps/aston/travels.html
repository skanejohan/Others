<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8"> 
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 100% }
    </style>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyAIQ3Vxs3dAPbkzeotgR4H6xu2sgXhn3ng&sensor=true"></script>
    <script type="text/javascript" src="travels.js"></script>

    <script type="text/javascript">
      var map;

      function formatDate(date) {
        var monthNames = ["Januari", "Februari", "Mars", "April", "Maj", "Juni", "Juli", "Augusti", 
                          "September", "Oktober", "November", "December"];
        var day = date.getDate();
        var monthIndex = date.getMonth();
        var year = date.getFullYear();
        return day + ' ' + monthNames[monthIndex] + ' ' + year;
      }

      function addMarker(map, title, position) {
        var marker = new google.maps.Marker({position: position, map: map, title: title });
      }

      function addLocation(trip, loc) {
        s = trip.name + " (" + formatDate(trip.start) + " - " + formatDate(trip.end) + ")\n\n" + 
            loc.name + " (" + formatDate(loc.start) + " - " + formatDate(loc.end) + ")\n" +
            loc.address; 
        addMarker(map, s, loc.position, s);
      }

      function addTrip(trip) {
        function addLoc(loc) {
          addLocation(trip, loc);
        }
        trip.locations.map(addLoc);
      }

      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(57.692842, 11.950854),
          zoom: 4,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
        travels.map(addTrip);
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>

  </head>

  <body>
    <div id="map-canvas"/>
  </body>

</html>